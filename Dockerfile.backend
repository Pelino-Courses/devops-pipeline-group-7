FROM denoland/deno:alpine

WORKDIR /app

# Copy backend source code
COPY src/supabase/functions/server/ ./src/supabase/functions/server/

# Set environment variables
ENV PORT=3000

# Expose port
EXPOSE 3000

# Run the server
CMD ["run", "--allow-net", "--allow-env", "--allow-read", "--port=3000", "src/supabase/functions/server/index.tsx"]
